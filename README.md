# nodejs-golang-start

这是一个 Node.js 和 Go 语言混合开发的项目，使用了 protobuf 进行通信。

## 项目结构

- `main.go`: Go 语言的主程序，负责处理消息队列和发送结果。
- `index.mjs`: Node.js 的主程序，负责启动 Go 进程、发送命令和处理结果。
- `messages.proto`: protobuf 文件，定义了消息格式。
- `package.json`: Node.js 项目的配置文件。

## 依赖

- `protobufjs`: 用于解析 protobuf 文件。

## 安装

1. 安装依赖：`pnpm i`
2. 构建 go 程序：`go run main.go`
3. 运行 Node.js 程序：`node index.mjs`

## 生成 protobuf 代码

```

protoc --go_out=./golang proto/messages.proto

```

## 使用

1. 启动 Node.js 程序后，会自动启动 Go 进程。
2. 可以通过 Node.js 程序发送命令给 Go 进程。
3. Go 进程会处理命令并发送结果给 Node.js 程序。
4. Node.js 程序会处理结果并输出到控制台。

## 进程通信方式

| 特性/方案                     | 标准输入输出 (stdin/stdout) | 共享内存 | 内存文件 (内存映射文件) | IPC (Unix域套接字/命名管道) |
|------------------------------|-----------------------------|----------|-------------------------|-----------------------------|
| **性能**                     | 低                          | 高       | 高                      | 中到高                      |
| **实现复杂度**               | 低                          | 高       | 中等                    | 中等                        |
| **跨平台性**                 | 高                          | 低       | 低                      | 中等                        |
| **调试便利性**               | 高                          | 低       | 中等                    | 中等                        |
| **适用场景**                 | 轻量级、简单的双向通信      | 大数据量、实时应用     | 大数据量、需要持久化的应用 | 需要高效、灵活、多客户端支持的应用 |
| **可靠性**                   | 一般                        | 高       | 高                      | 高                          |
| **安全性**                   | 一般                        | 低       | 低                      | 高                          |
| **多客户端支持**             | 不支持                      | 支持     | 支持                    | 支持                        |
| **错误处理**                 | 简单                        | 复杂     | 复杂                    | 复杂                        |
| **资源管理**                 | 简单                        | 复杂     | 复杂                    | 简单                        |
| **同步问题**                 | 无                          | 有       | 有                      | 有                          |
| **是否适合大数据量传输**     | 否                          | 是       | 是                      | 是                          |
| **是否适合实时应用**         | 否                          | 是       | 是                      | 是                          |
| **是否支持复杂的通信协议**   | 否                          | 否       | 否                      | 是      

## TOTO

- [ ] 使用共享内存方式实现进程间通信

## License

MIT License
